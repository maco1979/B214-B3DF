{"version":3,"file":"InferenceService-DkeDRVN5.js","sources":["../../src/pages/InferenceService.tsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { \r\n  Cpu, \r\n  Play, \r\n  Pause, \r\n  RefreshCw,\r\n  TrendingUp,\r\n  Clock,\r\n  Server,\r\n  Activity,\r\n  ArrowUpRight,\r\n  Shield,\r\n  Zap\r\n} from 'lucide-react';\r\nimport { apiClient } from '@/services/api';\r\nimport { BentoCard } from '@/components/ui/BentoCard';\r\nimport { \r\n  AreaChart, \r\n  Area, \r\n  XAxis, \r\n  YAxis, \r\n  CartesianGrid, \r\n  Tooltip, \r\n  ResponsiveContainer \r\n} from 'recharts';\r\nimport { cn } from '@/lib/utils';\r\n\r\nconst chartData = [\r\n  { time: '10:00', load: 45 },\r\n  { time: '10:05', load: 52 },\r\n  { time: '10:10', load: 48 },\r\n  { time: '10:15', load: 61 },\r\n  { time: '10:20', load: 55 },\r\n  { time: '10:25', load: 67 },\r\n  { time: '10:30', load: 60 },\r\n];\r\n\r\nexport function InferenceService() {\r\n  const [isRunning, setIsRunning] = useState(true);\r\n  const [loading, setLoading] = useState(false);\r\n  \r\n  const services = [\r\n    { id: 1, name: 'Vision_Classifier', endpoint: '/inf/v1/classify', status: '活跃', latency: '42ms', requests: '1.2K', rate: '99.8%', color: 'text-cyber-cyan' },\r\n    { id: 2, name: 'Object_Detector_V3', endpoint: '/inf/v3/detect', status: '活跃', latency: '65ms', requests: '840', rate: '98.5%', color: 'text-cyber-purple' },\r\n    { id: 3, name: 'LLM_Neural_Bridge', endpoint: '/inf/n1/generate', status: '维护中', latency: '120ms', requests: '560', rate: '97.2%', color: 'text-yellow-500' },\r\n  ];\r\n\r\n  const metrics = [\r\n    { label: '平均延迟', value: '64ms', trend: '-12%', icon: Clock },\r\n    { label: '错误率', value: '0.04%', trend: '-0.2%', icon: Shield },\r\n    { label: '吞吐量', value: '2.4 GB/s', trend: '+18%', icon: Zap },\r\n    { label: '活跃节点', value: '14/16', trend: '稳定', icon: Server },\r\n  ];\r\n\r\n  const toggleService = async () => {\r\n    setLoading(true);\r\n    const newState = !isRunning;\r\n    const res = await apiClient.toggleInferenceService(newState);\r\n    if (res.success) setIsRunning(newState);\r\n    setLoading(false);\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-8\">\r\n      {/* Header */}\r\n      <div className=\"flex flex-col md:flex-row md:items-center justify-between gap-6\">\r\n        <div>\r\n          <h1 className=\"text-4xl font-black tracking-tighter text-white mb-2 uppercase\">\r\n            推理 <span className=\"text-cyber-cyan\">管道</span>\r\n          </h1>\r\n          <p className=\"text-gray-500 font-medium tracking-tight uppercase text-xs\">实时神经计算与节点管理</p>\r\n        </div>\r\n        \r\n        <div className=\"flex items-center space-x-3\">\r\n          <button \r\n            onClick={toggleService}\r\n            disabled={loading}\r\n            className={cn(\r\n              \"px-6 py-3 rounded-xl font-bold flex items-center space-x-2 transition-all\",\r\n              isRunning \r\n                ? \"bg-cyber-cyan/10 text-cyber-cyan border border-cyber-cyan/20 neon-glow-cyan\" \r\n                : \"bg-cyber-rose/10 text-cyber-rose border border-cyber-rose/20\"\r\n            )}\r\n          >\r\n            {loading ? <RefreshCw className=\"w-4 h-4 animate-spin\" /> : (isRunning ? <Pause size={18} /> : <Play size={18} />)}\r\n            <span>{isRunning ? \"暂停管道\" : \"恢复管道\"}</span>\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Metrics Grid */}\r\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6\">\r\n        {metrics.map((m, i) => (\r\n          <BentoCard key={i} className=\"h-28 flex items-center justify-between\">\r\n            <div>\r\n              <p className=\"text-[10px] font-bold text-gray-500 uppercase tracking-widest mb-1\">{m.label}</p>\r\n              <h3 className=\"text-2xl font-black text-white\">{m.value}</h3>\r\n              <p className=\"text-[10px] text-cyber-emerald font-bold mt-1\">{m.trend}</p>\r\n            </div>\r\n            <div className=\"p-3 rounded-xl bg-white/5 border border-white/10 text-cyber-cyan\">\r\n              <m.icon size={20} />\r\n            </div>\r\n          </BentoCard>\r\n        ))}\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-12 gap-6\">\r\n        {/* Service List */}\r\n        <div className=\"lg:col-span-7 space-y-4\">\r\n           <h3 className=\"text-xs font-black text-gray-500 uppercase tracking-[0.2em] mb-4 flex items-center space-x-2\">\r\n              <Cpu size={14} className=\"text-cyber-cyan\" />\r\n              <span>神经微服务</span>\r\n           </h3>\r\n           \r\n           {services.map((s) => (\r\n             <motion.div \r\n               key={s.id}\r\n               whileHover={{ x: 4 }}\r\n               className=\"glass-card rounded-2xl p-5 border border-white/5 flex items-center justify-between group\"\r\n             >\r\n                <div className=\"flex items-center space-x-4\">\r\n                   <div className={cn(\"p-3 rounded-xl bg-white/5 border border-white/5 group-hover:neon-glow-cyan transition-all\", s.color)}>\r\n                      <Cpu size={24} />\r\n                   </div>\r\n                   <div>\r\n                      <h4 className=\"font-bold text-white mb-0.5\">{s.name}</h4>\r\n                      <p className=\"text-[10px] font-mono text-gray-600\">{s.endpoint}</p>\r\n                   </div>\r\n                </div>\r\n\r\n                <div className=\"flex items-center space-x-8\">\r\n                   <div className=\"hidden md:block text-right\">\r\n                      <p className=\"text-[10px] font-bold text-gray-600 uppercase mb-1\">成功率</p>\r\n                      <p className=\"text-xs font-black text-cyber-emerald\">{s.rate}</p>\r\n                   </div>\r\n                   <div className=\"hidden md:block text-right\">\r\n                      <p className=\"text-[9px] font-bold text-gray-600 uppercase mb-1\">延迟</p>\r\n                      <p className=\"text-xs font-black text-white\">{s.latency}</p>\r\n                   </div>\r\n                   <div className={cn(\r\n                     \"px-3 py-1 rounded-full text-[9px] font-black uppercase tracking-tighter border\",\r\n                     s.status === 'Active' ? \"bg-cyber-emerald/10 text-cyber-emerald border-cyber-emerald/20\" : \"bg-yellow-500/10 text-yellow-500 border-yellow-500/20\"\r\n                   )}>\r\n                      {s.status}\r\n                   </div>\r\n                   <button className=\"p-2 rounded-lg bg-white/5 hover:bg-cyber-cyan hover:text-black transition-all\">\r\n                      <ArrowUpRight size={16} />\r\n                   </button>\r\n                </div>\r\n             </motion.div>\r\n           ))}\r\n        </div>\r\n\r\n        {/* Load Analysis Chart */}\r\n        <BentoCard \r\n          className=\"lg:col-span-5\" \r\n          title=\"计算负载\" \r\n          description=\"神经集群压力\"\r\n          icon={Activity}\r\n        >\r\n          <div className=\"h-64 w-full mt-6\">\r\n            <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n              <AreaChart data={chartData}>\r\n                <defs>\r\n                  <linearGradient id=\"colorLoad\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\r\n                    <stop offset=\"5%\" stopColor=\"#bc13fe\" stopOpacity={0.3}/>\r\n                    <stop offset=\"95%\" stopColor=\"#bc13fe\" stopOpacity={0}/>\r\n                  </linearGradient>\r\n                </defs>\r\n                <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#ffffff05\" vertical={false} />\r\n                <XAxis dataKey=\"time\" stroke=\"#ffffff20\" fontSize={10} axisLine={false} tickLine={false} />\r\n                <YAxis hide />\r\n                <Tooltip \r\n                  contentStyle={{ backgroundColor: '#09090b', border: '1px solid #ffffff10', borderRadius: '8px' }}\r\n                  itemStyle={{ color: '#bc13fe' }}\r\n                />\r\n                <Area type=\"monotone\" dataKey=\"load\" stroke=\"#bc13fe\" strokeWidth={3} fill=\"url(#colorLoad)\" />\r\n              </AreaChart>\r\n            </ResponsiveContainer>\r\n          </div>\r\n\r\n          <div className=\"mt-6 p-4 rounded-xl bg-cyber-purple/5 border border-cyber-purple/20\">\r\n             <div className=\"flex items-center space-x-3\">\r\n                <Shield size={20} className=\"text-cyber-purple\" />\r\n                <div>\r\n                   <p className=\"text-[10px] font-bold text-cyber-purple uppercase\">安全协议</p>\r\n                   <p className=\"text-xs text-gray-400\">所有推理请求均经过端到端加密，并通过去中心化共识进行验证。</p>\r\n                </div>\r\n             </div>\r\n          </div>\r\n        </BentoCard>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["chartData","InferenceService","isRunning","setIsRunning","useState","loading","setLoading","services","metrics","Clock","Shield","Zap","Server","toggleService","newState","apiClient","jsxs","jsx","cn","RefreshCw","Pause","Play","m","i","BentoCard","Cpu","motion","ArrowUpRight","Activity","ResponsiveContainer","AreaChart","CartesianGrid","XAxis","YAxis","Tooltip","Area"],"mappings":"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"}