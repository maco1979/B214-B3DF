import{c as n,j as e,m as y,a as i,e as Q,v as E,r as a,d,Z as X,b as J,A as Y}from"./index-yVhfAtPc.js";import{B as w}from"./BentoCard-BzO3UFIZ.js";import{C as ee}from"./check-circle-CjWdKTnx.js";import{R as se}from"./refresh-cw-a_RgfZ6I.js";import{V as F}from"./video-4YKU6MAj.js";const te=n("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),ae=n("Battery",[["rect",{width:"16",height:"10",x:"2",y:"7",rx:"2",ry:"2",key:"1w10f2"}],["line",{x1:"22",x2:"22",y1:"11",y2:"13",key:"4dh1rd"}]]),ce=n("Bluetooth",[["path",{d:"m7 7 10 10-5 5V2l5 5L7 17",key:"1q5490"}]]),re=n("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]),ie=n("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),P=n("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),N=n("Power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]),ne=n("Radio",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]),le=n("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),v=n("Wifi",[["path",{d:"M5 13a10 10 0 0 1 14 0",key:"6v8j51"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]),de=t=>{switch(t){case"wifi":return e.jsx(v,{className:"w-4 h-4"});case"bluetooth":return e.jsx(ce,{className:"w-4 h-4"});case"app":return e.jsx(le,{className:"w-4 h-4"});case"infrared":return e.jsx(ne,{className:"w-4 h-4"});default:return e.jsx(v,{className:"w-4 h-4"})}},oe=({device:t,onToggleConnection:u,onControl:f,isSelected:h,onSelect:p})=>{var x;const o=t.status==="online";return e.jsxs(y.div,{layout:!0,className:i("glass-card rounded-2xl p-5 border transition-all duration-300 group",o?"border-white/10":"border-red-500/20 opacity-70",h&&"border-cyber-cyan/40 ring-1 ring-cyber-cyan/20"),children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:i("p-3 rounded-xl transition-all duration-300",o?"bg-cyber-cyan/10 text-cyber-cyan group-hover:neon-glow-cyan":"bg-gray-800 text-gray-500"),children:e.jsx(Q,{size:20})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-white/90 leading-none mb-1",children:t.name}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:i("w-1.5 h-1.5 rounded-full",o?"bg-cyber-emerald animate-pulse":"bg-red-500")}),e.jsxs("span",{className:"text-[10px] uppercase tracking-tighter text-gray-500 font-bold",children:[t.type," • ",t.status]})]})]})]}),e.jsx("input",{type:"checkbox",checked:h,onChange:()=>p(t.id),className:"w-4 h-4 rounded border-white/10 bg-white/5 checked:bg-cyber-cyan focus:ring-cyber-cyan accent-cyber-cyan"})]}),e.jsxs("div",{className:"space-y-3 mb-5",children:[e.jsxs("div",{className:"flex items-center justify-between text-[10px] text-gray-500 uppercase tracking-widest font-bold",children:[e.jsx("span",{children:"连接质量"}),e.jsxs("span",{className:o?"text-cyber-cyan":"",children:[t.signal,"%"]})]}),e.jsx("div",{className:"h-1 w-full bg-white/5 rounded-full overflow-hidden",children:e.jsx(y.div,{initial:{width:0},animate:{width:`${t.signal}%`},className:i("h-full rounded-full",t.signal>70?"bg-cyber-cyan":"bg-yellow-500")})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-gray-400",children:[de(t.connection_type||"wifi"),e.jsx("span",{className:"text-xs",children:((x=t.connection_type)==null?void 0:x.toUpperCase())||"UNKNOWN"})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-gray-400",children:[e.jsx(ae,{size:14,className:t.battery<20?"text-red-500":""}),e.jsxs("span",{className:"text-xs",children:[t.battery,"%"]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 pt-4 border-t border-white/5",children:[e.jsxs("button",{onClick:()=>u(t.id),className:i("flex-1 py-2 rounded-lg text-xs font-bold transition-all flex items-center justify-center space-x-2",t.connected?"bg-white/5 text-gray-400 hover:bg-white/10 hover:text-white":"bg-cyber-emerald/10 text-cyber-emerald border border-cyber-emerald/20 hover:bg-cyber-emerald/20"),children:[e.jsx(N,{size:14}),e.jsx("span",{children:t.connected?"断开连接":"连接"})]}),e.jsx("button",{disabled:!t.connected,onClick:()=>f(t.id),className:i("p-2 rounded-lg transition-all",t.connected?"bg-cyber-cyan/10 text-cyber-cyan hover:bg-cyber-cyan/20 border border-cyber-cyan/20":"bg-white/5 text-gray-600 cursor-not-allowed"),children:e.jsx(E,{size:16})})]})]})},V=[{id:1,name:"农业智能",description:"自主灌溉和养分监测",devices:[1,2,3]},{id:2,name:"生态节能",description:"超低功耗模式",devices:[1,4]},{id:3,name:"最大安全",description:"全方位生物识别监控",devices:[3,4]}];function fe(){const[t,u]=a.useState([]),[f,h]=a.useState([]),[p,o]=a.useState(!1),[x,B]=a.useState(V[0]),[b,k]=a.useState(!1),[xe,me]=a.useState(null),[O,q]=a.useState("ready"),[g,C]=a.useState(!1),[M,L]=a.useState(""),S=a.useRef(null),[m,z]=a.useState(!1),[A,_]=a.useState(""),[he,W]=a.useState(""),[j,I]=a.useState(!1);a.useEffect(()=>{T(),U(),Z()},[]);const Z=async()=>{var s;try{const c=await d.get("/api/ai-control/master-control/status");o(((s=c.data)==null?void 0:s.master_control_active)||!1)}catch{}},T=async()=>{const s=await d.getDevices();s.success&&s.data&&u(s.data)},U=async()=>{const s=await d.getJepaDtmpcStatus();s.success&&s.data&&(k(s.data.is_active),q(s.data.model_status))},$=async()=>{I(!0);const s=await d.scanDevices();s.success&&s.data&&u(s.data),I(!1)},R=async()=>{const s=!p;(await d.activateMasterControl(s)).success&&o(s)},K=async()=>{const s=!b;(await d.activateJepaDtmpc({controller_params:{control_switch:s,startup_mode:"cold"},jepa_params:{enabled:s,embedding_dim:10,prediction_horizon:20}})).success&&k(s)},G=async()=>{m?(await d.closeCamera(),z(!1),_("")):(await d.openCamera()).success?z(!0):W("Failed to access hardware")};a.useEffect(()=>{let s;const c=async()=>{var r;if(m){try{const l=await d.getCameraFrame();l.success&&((r=l.data)!=null&&r.frame_base64)&&_(l.data.frame_base64)}catch{}s=requestAnimationFrame(c)}};return m&&c(),()=>cancelAnimationFrame(s)},[m]);const H=()=>{var s;if(g)(s=S.current)==null||s.stop(),C(!1);else{const c=window.SpeechRecognition||window.webkitSpeechRecognition;if(c){const r=new c;r.lang="zh-CN",r.continuous=!0,r.onresult=l=>{const D=l.results[l.results.length-1][0].transcript;L(D),D.includes("开启主控")&&R()},r.start(),S.current=r,C(!0)}}};return e.jsxs("div",{className:"space-y-8 pb-20",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-4xl font-black tracking-tighter text-white mb-2 uppercase",children:["控制 ",e.jsx("span",{className:"text-cyber-cyan",children:"中心"})]}),e.jsx("p",{className:"text-gray-500 font-medium tracking-tight uppercase text-xs",children:"AI设备编排与优化"})]}),e.jsxs("div",{className:"flex items-center space-x-3 bg-white/5 p-2 rounded-2xl border border-white/5 backdrop-blur-md",children:[e.jsxs("button",{onClick:H,className:i("p-3 rounded-xl transition-all flex items-center space-x-2",g?"bg-cyber-rose/20 text-cyber-rose neon-glow-purple":"text-gray-400 hover:text-white"),children:[g?e.jsx(P,{size:20}):e.jsx(ie,{size:20}),e.jsx("span",{className:"text-xs font-bold uppercase",children:g?"监听中":"语音控制"})]}),e.jsx("div",{className:"w-[1px] h-6 bg-white/10"}),e.jsxs("button",{onClick:R,className:i("px-6 py-3 rounded-xl font-bold flex items-center space-x-2 transition-all",p?"bg-cyber-rose text-white shadow-lg shadow-cyber-rose/40":"bg-cyber-cyan/10 text-cyber-cyan border border-cyber-cyan/20 neon-glow-cyan"),children:[e.jsx(N,{size:18}),e.jsx("span",{children:p?"关闭主控":"激活主控"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[e.jsxs("div",{className:"lg:col-span-8 space-y-6",children:[e.jsx(w,{title:"AI运行模式",description:"预定义神经配置文件",icon:E,children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-2",children:V.map(s=>e.jsxs("button",{onClick:()=>{B(s),h(s.devices)},className:i("p-5 rounded-2xl border text-left transition-all relative overflow-hidden group",x.id===s.id?"bg-cyber-cyan/10 border-cyber-cyan/40":"bg-white/5 border-white/5 hover:border-white/10"),children:[e.jsx("div",{className:i("mb-4 w-10 h-10 rounded-lg flex items-center justify-center transition-all",x.id===s.id?"bg-cyber-cyan text-black":"bg-white/5 text-gray-500"),children:e.jsx(X,{size:20})}),e.jsx("h4",{className:"font-bold text-white mb-1",children:s.name}),e.jsx("p",{className:"text-[10px] text-gray-500 uppercase leading-relaxed tracking-wider",children:s.description}),x.id===s.id&&e.jsx(y.div,{layoutId:"active-preset",className:"absolute top-2 right-2",children:e.jsx(ee,{size:16,className:"text-cyber-cyan"})})]},s.id))})}),e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("h3",{className:"text-lg font-bold text-white uppercase tracking-tighter flex items-center space-x-2",children:[e.jsx(v,{size:18,className:"text-cyber-cyan"}),e.jsx("span",{children:"设备矩阵"})]}),e.jsxs("button",{onClick:$,disabled:j,className:"text-[10px] font-bold text-cyber-cyan uppercase tracking-widest flex items-center space-x-2 hover:opacity-80 disabled:opacity-50",children:[e.jsx(se,{size:12,className:j?"animate-spin":""}),e.jsx("span",{children:j?"扫描中...":"重新扫描环境"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.map(s=>e.jsx(oe,{device:s,isSelected:f.includes(s.id),onSelect:c=>h(r=>r.includes(c)?r.filter(l=>l!==c):[...r,c]),onToggleConnection:()=>{},onControl:()=>{}},s.id)),t.length===0&&[1,2,3,4].map(s=>e.jsx("div",{className:"h-48 glass-card rounded-2xl animate-pulse"},s))]})]}),e.jsxs("div",{className:"lg:col-span-4 space-y-6",children:[e.jsxs(w,{title:"视觉智能",description:"神经流馈送",icon:F,children:[e.jsxs("div",{className:"mt-4 relative rounded-xl overflow-hidden aspect-video bg-black border border-white/5 group",children:[m?A?e.jsx("img",{src:`data:image/jpeg;base64,${A}`,className:"w-full h-full object-cover",alt:"Feed"}):e.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-xs text-cyber-cyan animate-pulse font-mono",children:"建立上行链路..."}):e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-gray-600",children:[e.jsx(F,{size:40,className:"mb-2 opacity-20"}),e.jsx("span",{className:"text-[10px] uppercase font-bold tracking-widest",children:"馈送离线"})]}),e.jsxs("div",{className:"absolute bottom-4 right-4 flex space-x-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:G,className:"p-2 rounded-lg bg-cyber-black/80 backdrop-blur-md border border-white/10 text-white hover:bg-cyber-cyan hover:text-black transition-all",children:e.jsx(N,{size:14})}),e.jsx("button",{className:"p-2 rounded-lg bg-cyber-black/80 backdrop-blur-md border border-white/10 text-white hover:bg-cyber-cyan hover:text-black transition-all",children:e.jsx(re,{size:14})})]}),m&&e.jsxs("div",{className:"absolute top-4 left-4 flex items-center space-x-2 px-2 py-1 rounded bg-black/60 backdrop-blur-sm border border-cyber-emerald/30",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-cyber-emerald animate-pulse"}),e.jsx("span",{className:"text-[8px] font-bold text-cyber-emerald uppercase tracking-tighter",children:"实时神经馈送"})]})]}),e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsx("p",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest",children:"AI视觉状态"}),e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-xl bg-white/5 border border-white/5",children:[e.jsx("span",{className:"text-xs text-gray-400",children:"对象跟踪"}),e.jsx("span",{className:"text-cyber-emerald font-bold text-xs uppercase",children:"最佳"})]})]})]}),e.jsxs(w,{title:"JEPA预测",description:"自主MPC集成",icon:J,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:i("w-2 h-2 rounded-full",b?"bg-cyber-emerald animate-pulse":"bg-gray-700")}),e.jsxs("span",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest",children:["引擎 ",b?"运行中":"待机"]})]}),e.jsx("button",{onClick:K,className:i("text-[10px] font-bold px-3 py-1 rounded-full transition-all border",b?"bg-cyber-rose/10 text-cyber-rose border-cyber-rose/20":"bg-cyber-cyan/10 text-cyber-cyan border-cyber-cyan/20"),children:b?"断开":"启动"})]}),e.jsxs("div",{className:"h-40 w-full bg-white/5 rounded-xl border border-white/5 p-4 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-10",children:e.jsx(J,{size:80,className:"text-cyber-cyan"})}),e.jsxs("div",{className:"relative z-10 flex flex-col h-full justify-between",children:[e.jsxs("div",{className:"flex justify-between items-end",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[8px] text-gray-500 uppercase font-bold mb-1",children:"预测权重"}),e.jsx("h4",{className:"text-2xl font-black text-white",children:"0.842"})]}),e.jsx(te,{size:20,className:"text-cyber-cyan mb-1"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-[10px] font-bold uppercase tracking-widest",children:[e.jsx("span",{className:"text-gray-500",children:"稳定性"}),e.jsx("span",{className:"text-cyber-emerald",children:"98.4%"})]}),e.jsx("div",{className:"h-1 w-full bg-white/10 rounded-full overflow-hidden",children:e.jsx(y.div,{initial:{width:0},animate:{width:"98%"},className:"h-full bg-cyber-emerald"})})]})]})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"p-3 rounded-xl bg-white/5 border border-white/5 text-center",children:[e.jsx("p",{className:"text-[8px] text-gray-500 uppercase font-bold mb-1",children:"模型状态"}),e.jsx("p",{className:"text-xs font-bold text-cyber-cyan uppercase",children:O})]}),e.jsxs("div",{className:"p-3 rounded-xl bg-white/5 border border-white/5 text-center",children:[e.jsx("p",{className:"text-[8px] text-gray-500 uppercase font-bold mb-1",children:"能源指数"}),e.jsx("p",{className:"text-xs font-bold text-cyber-purple",children:"0.024"})]})]})]}),e.jsx(Y,{children:M&&e.jsxs(y.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,scale:.95},className:"p-4 rounded-xl glass-morphism border border-cyber-cyan/20 bg-cyber-cyan/5",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(P,{size:14,className:"text-cyber-cyan"}),e.jsx("span",{className:"text-[10px] font-bold text-cyber-cyan uppercase tracking-widest",children:"最后接收的命令"})]}),e.jsxs("p",{className:"text-sm font-mono text-white/90",children:['"',M,'"']})]})})]})]})]})}export{fe as AIControl};
//# sourceMappingURL=AIControl-Drc5QJaa.js.map
