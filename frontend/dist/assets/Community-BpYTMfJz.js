import{c as x,r,j as e,k as U,f as i,M as f,d as y}from"./index-yVhfAtPc.js";import{C as d,a as o,b as h,d as m}from"./card-fvSyAV1p.js";import{I as C}from"./input-BRuGLdy_.js";import{P as S}from"./play-DJ2Vx5IY.js";import{V as j}from"./video-4YKU6MAj.js";import{U as X}from"./users-DqIhfcId.js";import{P as q}from"./pause-Bajt5Amz.js";import{S as L}from"./share-2-Yeqrpp_p.js";const N=x("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),F=x("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),R=x("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),Z=x("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]),D=x("VolumeX",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]),G=[],J=[{id:1,user:"AI爱好者小明",avatar:"https://ui-avatars.com/api/?name=小明&background=random",content:"今天使用AI平台的模型训练功能，效果非常好！训练速度比之前提升了30%，推荐大家使用。",likes:128,comments:35,time:"2小时前",tags:["模型训练","AI","技术分享"]},{id:2,user:"农业科技达人",avatar:"https://ui-avatars.com/api/?name=农业科技达人&background=random",content:"使用AI平台的农业监测功能，成功预测了农田的病虫害情况，帮助农民减少了损失。",likes:256,comments:48,time:"4小时前",tags:["农业","病虫害","预测"]},{id:3,user:"区块链开发者",avatar:"https://ui-avatars.com/api/?name=区块链开发者&background=random",content:"AI平台的区块链集成功能非常强大，可以实现数据的安全存储和共享。",likes:192,comments:27,time:"6小时前",tags:["区块链","数据安全","集成"]}];function ce(){const[P,z]=r.useState(G),[l,A]=r.useState(""),[a,g]=r.useState(null),[v,M]=r.useState(!1),[w,V]=r.useState(!1),[n,p]=r.useState(""),[u,b]=r.useState([{id:1,user:"用户A",content:"这个直播内容非常棒！学到了很多关于AI的知识，感谢主播分享！",time:"1小时前",likes:15},{id:2,user:"用户B",content:"请问这个技术在实际生产环境中应用效果如何？",time:"30分钟前",likes:8},{id:3,user:"用户C",content:"主播讲得很清晰，希望能有更多这样的直播！",time:"15分钟前",likes:12}]),[k,I]=r.useState({}),[_,E]=r.useState({1:128,2:256,3:192});r.useEffect(()=>{(async()=>{try{const t=await y.getCommunityLiveStreams();t.success&&t.data&&(z(t.data),t.data.length>0&&g(t.data[0]))}catch(t){console.error("获取直播流失败:",t)}})()},[]);const H=P.filter(s=>s.title.toLowerCase().includes(l.toLowerCase())||s.streamer.toLowerCase().includes(l.toLowerCase())||s.tags.some(t=>t.toLowerCase().includes(l.toLowerCase()))),T=J.filter(s=>s.user.toLowerCase().includes(l.toLowerCase())||s.content.toLowerCase().includes(l.toLowerCase())||s.tags.some(t=>t.toLowerCase().includes(l.toLowerCase()))),$=async()=>{if(n.trim()&&a)try{if((await y.submitComment(a.id,n)).success){const t={id:u.length+1,user:"我",content:n,time:"刚刚",likes:0};b([t,...u]),p("")}}catch(s){console.error("提交评论失败:",s)}},B=async s=>{try{(await y.likePost(s)).success&&(I(c=>({...c,[s]:!c[s]})),E(c=>({...c,[s]:c[s]+(k[s]?-1:1)})))}catch(t){console.error("点赞失败:",t)}},Q=s=>{b(t=>t.map(c=>c.id===s?{...c,likes:c.likes+1}:c))};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-tech-primary/10 to-tech-secondary/10 rounded-lg p-6 border border-tech-primary/20",children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text mb-2",children:"AI社区"}),e.jsx("p",{className:"text-gray-300",children:"参与直播、分享技术、交流经验"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(U,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx(C,{placeholder:"搜索直播、帖子或用户...",className:"pl-10 bg-tech-dark/50 border-tech-primary/20 text-white placeholder:text-gray-400",value:l,onChange:s=>A(s.target.value)})]}),e.jsx("div",{className:"flex justify-center",children:e.jsxs(i,{variant:"tech",size:"lg",className:"flex items-center space-x-2",children:[e.jsx(S,{className:"w-5 h-5"}),e.jsx("span",{children:"进入直播"})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsx(d,{className:"glass-effect overflow-hidden",children:a?e.jsxs(e.Fragment,{children:[e.jsx(o,{className:"bg-tech-dark/80 border-b border-tech-primary/20",children:e.jsxs(h,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(j,{className:"w-5 h-5 text-tech-primary"}),e.jsx("span",{children:a.title})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(i,{variant:"tech",size:"sm",className:"flex items-center space-x-1",children:[e.jsx(X,{className:"w-4 h-4"}),e.jsx("span",{children:a.viewers})]}),e.jsx("span",{className:"text-xs px-2 py-1 bg-red-500 rounded-full animate-pulse",children:"直播中"})]})]})}),e.jsx(m,{className:"p-0",children:e.jsxs("div",{className:"relative bg-black w-full h-[400px] flex items-center justify-center",children:[a.cover_image?e.jsx("img",{src:a.cover_image,alt:a.title,className:"w-full h-full object-cover opacity-70"}):e.jsx("div",{className:"bg-gradient-to-br from-tech-primary to-tech-secondary w-full h-full flex items-center justify-center opacity-70",children:e.jsx(j,{className:"w-20 h-20 text-white/50"})}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx(i,{variant:"secondary",size:"icon",className:"w-16 h-16 rounded-full bg-white/20 backdrop-blur-sm hover:bg-white/30",onClick:()=>M(!v),children:v?e.jsx(q,{className:"w-8 h-8"}):e.jsx(S,{className:"w-8 h-8 ml-1"})})}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4 bg-gradient-to-t from-black/80 to-transparent",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(i,{variant:"ghost",size:"icon",className:"text-white hover:bg-white/20",onClick:()=>V(!w),children:w?e.jsx(D,{className:"w-5 h-5"}):e.jsx(Z,{className:"w-5 h-5"})}),e.jsx("div",{className:"text-sm text-white",children:a.streamer})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(i,{variant:"ghost",size:"icon",className:"text-white hover:bg-white/20",children:e.jsx(N,{className:"w-5 h-5"})}),e.jsx(i,{variant:"ghost",size:"icon",className:"text-white hover:bg-white/20",children:e.jsx(f,{className:"w-5 h-5"})}),e.jsx(i,{variant:"ghost",size:"icon",className:"text-white hover:bg-white/20",children:e.jsx(L,{className:"w-5 h-5"})}),e.jsx(i,{variant:"ghost",size:"icon",className:"text-white hover:bg-white/20",children:e.jsx(F,{className:"w-5 h-5"})})]})]})})]})})]}):e.jsx(m,{className:"flex items-center justify-center h-[400px]",children:e.jsx("p",{className:"text-gray-400",children:"正在加载直播..."})})}),e.jsxs(d,{className:"glass-effect",children:[e.jsx(o,{children:e.jsxs(h,{className:"flex items-center space-x-2",children:[e.jsx(f,{className:"w-5 h-5 text-tech-primary"}),e.jsxs("span",{children:["评论 (",Math.floor(Math.random()*1e3),")"]})]})}),e.jsxs(m,{className:"space-y-4",children:[e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-tech-primary to-tech-secondary flex items-center justify-center font-bold",children:"我"}),e.jsxs("div",{className:"flex-1",children:[e.jsx(C,{placeholder:"输入评论...",className:"bg-tech-dark/50 border-tech-primary/20 text-white placeholder:text-gray-400",value:n,onChange:s=>p(s.target.value)}),e.jsxs("div",{className:"flex justify-end mt-2 space-x-2",children:[e.jsx(i,{variant:"outline",size:"sm",onClick:()=>p(""),children:"取消"}),e.jsx(i,{variant:"tech",size:"sm",onClick:$,disabled:!n.trim(),children:"发送"})]})]})]}),u.map(s=>e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-random-1 to-random-2 flex items-center justify-center font-bold",children:s.user.charAt(0)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("span",{className:"text-sm font-medium",children:s.user}),e.jsx("span",{className:"text-xs text-gray-400",children:s.time})]}),e.jsx("p",{className:"text-sm text-gray-300",children:s.content}),e.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-xs text-gray-400",children:[e.jsxs("button",{className:`flex items-center space-x-1 ${s.likes>0?"text-tech-primary":"hover:text-tech-primary"}`,onClick:()=>Q(s.id),children:[e.jsx(N,{className:"w-3 h-3"}),e.jsx("span",{children:s.likes})]}),e.jsx("button",{className:"hover:text-tech-primary",children:"回复"}),e.jsx("button",{className:"hover:text-tech-primary",children:"举报"})]})]})]},s.id))]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(d,{className:"glass-effect",children:[e.jsx(o,{children:e.jsxs(h,{className:"flex items-center space-x-2",children:[e.jsx(j,{className:"w-5 h-5 text-tech-primary"}),e.jsx("span",{children:"热门直播"})]})}),e.jsx(m,{className:"space-y-3",children:H.map(s=>e.jsxs("div",{className:`cursor-pointer rounded-lg overflow-hidden border ${(a==null?void 0:a.id)===s.id?"border-tech-primary":"border-tech-primary/10"} hover:border-tech-primary/50 transition-all duration-300`,onClick:()=>g(s),children:[e.jsxs("div",{className:"relative",children:[s.cover_image?e.jsx("img",{src:s.cover_image,alt:s.title,className:"w-full h-32 object-cover"}):e.jsx("div",{className:"bg-gradient-to-br from-tech-primary to-tech-secondary w-full h-32 flex items-center justify-center",children:e.jsx(j,{className:"w-10 h-10 text-white/50"})}),e.jsx("div",{className:"absolute top-2 left-2 text-xs px-2 py-1 bg-red-500 rounded-full animate-pulse",children:"直播中"}),e.jsx("div",{className:"absolute top-2 right-2 text-xs px-2 py-1 bg-black/70 rounded-full text-white",children:s.viewers})]}),e.jsxs("div",{className:"p-2 bg-tech-dark/50",children:[e.jsx("h4",{className:"font-medium text-sm line-clamp-1",children:s.title}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:s.streamer})]})]},s.id))})]}),e.jsxs(d,{className:"glass-effect",children:[e.jsx(o,{children:e.jsxs(h,{className:"flex items-center space-x-2",children:[e.jsx(R,{className:"w-5 h-5 text-tech-primary"}),e.jsx("span",{children:"社区推荐"})]})}),e.jsx(m,{className:"space-y-4",children:T.map(s=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("img",{src:s.avatar,alt:s.user,className:"w-10 h-10 rounded-full"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium",children:s.user}),e.jsx("p",{className:"text-xs text-gray-400",children:s.time})]})]}),e.jsx("p",{className:"text-sm text-gray-300 line-clamp-3",children:s.content}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-400",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{className:`flex items-center space-x-1 ${k[s.id]?"text-tech-primary":"hover:text-tech-primary"}`,onClick:()=>B(s.id),children:[e.jsx(N,{className:"w-3 h-3"}),e.jsx("span",{children:_[s.id]})]}),e.jsxs("button",{className:"flex items-center space-x-1 hover:text-tech-primary",children:[e.jsx(f,{className:"w-3 h-3"}),e.jsx("span",{children:s.comments})]}),e.jsx("button",{className:"flex items-center space-x-1 hover:text-tech-primary",children:e.jsx(L,{className:"w-3 h-3"})})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[s.tags.slice(0,2).map((t,c)=>e.jsxs("span",{className:"px-2 py-0.5 bg-tech-primary/20 rounded-full",children:["#",t]},c)),s.tags.length>2&&e.jsxs("span",{className:"text-xs text-gray-500",children:["+",s.tags.length-2]})]})]})]},s.id))})]})]})]})]})}export{ce as Community,ce as default};
//# sourceMappingURL=Community-BpYTMfJz.js.map
