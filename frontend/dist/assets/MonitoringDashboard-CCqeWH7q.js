import{c as E,r as m,j as e,f as M,e as H,D as Q,x as N,b as V,w as q}from"./index-yVhfAtPc.js";import{C as n,a as d,b as x,d as h,c as o}from"./card-fvSyAV1p.js";import{c as G,a as J,b as K}from"./useSystemQueries-4KvPkmo-.js";import{U as O}from"./users-DqIhfcId.js";import{R as W}from"./refresh-cw-a_RgfZ6I.js";import{S as X}from"./server-Dshadqpy.js";import{T as Y}from"./trending-up-BWoRqqDA.js";import{C as Z}from"./check-circle-CjWdKTnx.js";import"./useQuery-BqIxVbD1.js";const ee=E("Network",[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]]),y=({data:a,color:g="#3b82f6"})=>{const p=Math.max(...a,1);return e.jsx("div",{className:"flex items-end h-16 space-x-1",children:a.map((i,r)=>e.jsx("div",{className:"flex-1 bg-gradient-to-t from-blue-500 to-blue-600 rounded-t",style:{height:`${i/p*100}%`,backgroundColor:g}},r))})};function xe(){var C,k;const{data:a,isFetching:g,refetch:p,error:i}=G(),{data:r,refetch:S,error:j}=J(),{data:v,refetch:U,isFetching:b,error:u}=K(),[F,T]=m.useState(new Date),[l,D]=m.useState([45,52,48,60,55,58,62,50]),[c,_]=m.useState([65,68,72,70,75,78,80,76]),[f,$]=m.useState([120,135,110,145,160,140,155,130]);m.useEffect(()=>{const s=setInterval(()=>{D(t=>[...t.slice(1),Math.random()*40+40]),_(t=>[...t.slice(1),Math.random()*20+60]),$(t=>[...t.slice(1),Math.random()*100+100])},5e3);return()=>clearInterval(s)},[]);const w=()=>{p(),S(),U(),T(new Date)};if(i||j||u)return e.jsxs("div",{className:"flex flex-col items-center justify-center h-96 space-y-3",children:[e.jsx("div",{className:"text-red-400 text-lg",children:"数据加载失败"}),e.jsx("div",{className:"text-gray-400 text-sm",children:(i==null?void 0:i.message)||(j==null?void 0:j.message)||(u==null?void 0:u.message)}),e.jsx(M,{variant:"tech",onClick:w,children:"重试"})]});const A=[{label:"CPU使用率",value:`${l[l.length-1].toFixed(1)}%`,icon:H,color:"text-blue-400",trend:"up"},{label:"内存使用",value:`${c[c.length-1].toFixed(1)}%`,icon:Q,color:"text-green-400",trend:"stable"},{label:"网络流量",value:`${f[f.length-1].toFixed(0)} MB/s`,icon:ee,color:"text-purple-400",trend:"up"},{label:"活跃连接",value:(a==null?void 0:a.active_connections)||"0",icon:O,color:"text-yellow-400",trend:"stable"}],I=[{name:"AI推理服务",status:(a==null?void 0:a.ai_service_status)==="healthy"?"healthy":"degraded",responseTime:"45ms",uptime:"99.8%"},{name:"区块链节点",status:(r==null?void 0:r.status)==="healthy"?"healthy":"degraded",responseTime:"120ms",uptime:"99.5%"},{name:"数据库服务",status:(a==null?void 0:a.database_status)==="healthy"?"healthy":"degraded",responseTime:"25ms",uptime:"99.9%"},{name:"边缘计算网关",status:v&&v.length>0?"healthy":"degraded",responseTime:"80ms",uptime:"98.7%"}],B=[{type:"warning",message:"CPU使用率超过80%",time:"5分钟前",service:"计算节点-01"},{type:"info",message:"区块链同步完成",time:"10分钟前",service:"区块链网络"},{type:"error",message:"边缘设备连接超时",time:"15分钟前",service:"边缘网关-02"}],L=s=>{switch(s){case"healthy":return e.jsx(Z,{className:"w-4 h-4 text-green-400"});case"degraded":return e.jsx(N,{className:"w-4 h-4 text-yellow-400"});default:return e.jsx(N,{className:"w-4 h-4 text-red-400"})}},P=s=>{switch(s){case"healthy":return"text-green-400";case"degraded":return"text-yellow-400";default:return"text-red-400"}},R=s=>{switch(s){case"error":return"bg-red-500/20 border-red-500/30";case"warning":return"bg-yellow-500/20 border-yellow-500/30";case"info":return"bg-blue-500/20 border-blue-500/30";default:return"bg-gray-500/20 border-gray-500/30"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text mb-2",children:"系统监控仪表盘"}),e.jsx("p",{className:"text-gray-300",children:"实时监控系统性能、服务状态和资源使用情况"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"text-sm text-gray-400",children:["最后更新: ",F.toLocaleTimeString()]}),e.jsxs(M,{variant:"outline",onClick:w,disabled:g||b,className:"flex items-center space-x-2",children:[e.jsx(W,{className:`w-4 h-4 ${g||b?"animate-spin":""}`}),e.jsx("span",{children:"刷新"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:A.map((s,t)=>{const z=s.icon;return e.jsxs(n,{className:"glass-effect hover:neon-glow transition-all duration-300",children:[e.jsxs(d,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(x,{className:"text-sm font-medium text-gray-400",children:s.label}),e.jsx(z,{className:`w-4 h-4 ${s.color}`})]}),e.jsxs(h,{children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:s.value}),e.jsx(y,{data:t===0?l:t===1?c:f})]})]},t)})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs(n,{className:"glass-effect lg:col-span-2",children:[e.jsxs(d,{children:[e.jsxs(x,{className:"flex items-center space-x-2",children:[e.jsx(X,{className:"w-5 h-5 text-tech-primary"}),e.jsx("span",{children:"服务状态监控"})]}),e.jsx(o,{children:"实时监控各项服务的运行状态"})]}),e.jsx(h,{className:"space-y-4",children:I.map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-tech-dark/50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[L(s.status),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-white",children:s.name}),e.jsxs("div",{className:"text-sm text-gray-400",children:["响应时间: ",s.responseTime]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:P(s.status),children:s.status==="healthy"?"正常":"异常"}),e.jsxs("div",{className:"text-xs text-gray-400",children:["可用性: ",s.uptime]})]})]},t))})]}),e.jsxs(n,{className:"glass-effect",children:[e.jsxs(d,{children:[e.jsxs(x,{className:"flex items-center space-x-2",children:[e.jsx(N,{className:"w-5 h-5 text-yellow-400"}),e.jsx("span",{children:"最近告警"})]}),e.jsx(o,{children:"系统最近的告警信息"})]}),e.jsx(h,{className:"space-y-3",children:B.map((s,t)=>e.jsxs("div",{className:`p-3 rounded-lg border ${R(s.type)}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-1",children:[e.jsx("span",{className:"text-sm font-medium text-white",children:s.service}),e.jsx("span",{className:"text-xs text-gray-400",children:s.time})]}),e.jsx("div",{className:"text-sm text-gray-300",children:s.message})]},t))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(n,{className:"glass-effect",children:[e.jsxs(d,{children:[e.jsxs(x,{className:"flex items-center space-x-2",children:[e.jsx(V,{className:"w-5 h-5 text-tech-primary"}),e.jsx("span",{children:"CPU使用率趋势"})]}),e.jsx(o,{children:"最近几分钟的CPU使用情况"})]}),e.jsxs(h,{children:[e.jsx(y,{data:l,color:"#3b82f6"}),e.jsxs("div",{className:"flex justify-between mt-2 text-sm text-gray-400",children:[e.jsxs("span",{children:["最低: ",Math.min(...l).toFixed(1),"%"]}),e.jsxs("span",{children:["平均: ",(l.reduce((s,t)=>s+t)/l.length).toFixed(1),"%"]}),e.jsxs("span",{children:["最高: ",Math.max(...l).toFixed(1),"%"]})]})]})]}),e.jsxs(n,{className:"glass-effect",children:[e.jsxs(d,{children:[e.jsxs(x,{className:"flex items-center space-x-2",children:[e.jsx(Y,{className:"w-5 h-5 text-green-400"}),e.jsx("span",{children:"内存使用趋势"})]}),e.jsx(o,{children:"最近几分钟的内存使用情况"})]}),e.jsxs(h,{children:[e.jsx(y,{data:c,color:"#10b981"}),e.jsxs("div",{className:"flex justify-between mt-2 text-sm text-gray-400",children:[e.jsxs("span",{children:["最低: ",Math.min(...c).toFixed(1),"%"]}),e.jsxs("span",{children:["平均: ",(c.reduce((s,t)=>s+t)/c.length).toFixed(1),"%"]}),e.jsxs("span",{children:["最高: ",Math.max(...c).toFixed(1),"%"]})]})]})]})]}),r&&e.jsxs(n,{className:"glass-effect",children:[e.jsxs(d,{children:[e.jsxs(x,{className:"flex items-center space-x-2",children:[e.jsx(q,{className:"w-5 h-5 text-purple-400"}),e.jsx("span",{children:"区块链网络状态"})]}),e.jsx(o,{children:"Hyperledger Fabric网络监控"})]}),e.jsx(h,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-tech-primary",children:((C=r.latest_block)==null?void 0:C.block_number)||"--"}),e.jsx("div",{className:"text-sm text-gray-400",children:"区块高度"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-400",children:((k=r.latest_block)==null?void 0:k.transaction_count)||"--"}),e.jsx("div",{className:"text-sm text-gray-400",children:"交易数量"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-400",children:r.initialized?"是":"否"}),e.jsx("div",{className:"text-sm text-gray-400",children:"网络初始化"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`text-2xl font-bold ${r.status==="healthy"?"text-green-400":"text-red-400"}`,children:r.status==="healthy"?"正常":"异常"}),e.jsx("div",{className:"text-sm text-gray-400",children:"网络状态"})]})]})})]})]})}export{xe as MonitoringDashboard};
//# sourceMappingURL=MonitoringDashboard-CCqeWH7q.js.map
